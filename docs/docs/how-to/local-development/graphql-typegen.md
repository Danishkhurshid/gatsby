---
title: GraphQL Typegen
examples:
  - label: Using GraphQL Typegen
    href: "https://github.com/gatsbyjs/gatsby/tree/master/examples/using-graphql-typegen"
---

## Introduction

If you're already using [Gatsby with TypeScript](/docs/how-to/custom-configuration/typescript) and manually typing the results of your queries, you'll learn in this guide how Gatsby's automatic GraphQL Typegen feature can make your life easier. By relying on the types that are generated by Gatsby itself and using autocompletion for GraphQL queries in your IDE you'll be able to write GraphQL queries quicker and safer.

At the moment this feature is behind a feature flag and in active development. You can voice your feedback in [RFC: GraphQL Typegen](https://github.com/gatsbyjs/gatsby/discussions/35420).

## Prerequisites

- A Gatsby project set up with `gatsby@4.14.0` or later.
- The flag `GRAPHQL_TYPEGEN` set inside `gatsby-config`.
  ```js:title=gatsby-config.js
  module.exports = {
    flags: {
      GRAPHQL_TYPEGEN: true,
    }
  }
  ```
- A `tsconfig.json` in your project with `"include": ["./src/**/*"]` set. See [full `tsconfig.json` example](https://github.com/gatsbyjs/gatsby/tree/master/examples/using-graphql-typegen/tsconfig.json).
- Optional: If you use VSCode you may install the [GraphQL extension](https://marketplace.visualstudio.com/items?itemName=GraphQL.vscode-graphql).

## Using the autogenerated `Queries` types

For this example to work you'll have to have a `title` inside your `siteMetadata` (in `gatsby-config.js`).

1. Start the development server with `gatsby develop`. Once the server is ready you should see a log message `Generating GraphQL and TypeScript types` at the bottom of your terminal.
1. Gatsby created a type generation file which you should see at `src/gatsby-types.d.ts`. It contains the TypeScript types for your queries. Your `tsconfig.json` should include this file so that you can access the `namespace Queries` everywhere in your project.
1. Create a new page at `src/pages/typegen.tsx` with the following contents:

   ```tsx
   import * as React from "react"
   import { graphql, PageProps } from "gatsby"

   const TypegenPage = ({ data }: PageProps) => {
     return (
       <main style={pageStyles}>
         <p>Site title: TODO</p>
         <hr />
         <p>Query Result:</p>
         <pre>
           <code>{JSON.stringify(data, null, 2)}</code>
         </pre>
       </main>
     )
   }

   export default TypegenPage

   export const query = graphql`
     query TypegenPage {
       site {
         siteMetadata {
           title
         }
       }
     }
   `
   ```

   It is important that your query has a name (here: `query TypegenPage {}`) as otherwise the automatic type generation doesn't work. We recommend naming the query the same as your React component.

1. Access the `Queries` namespace and use the `TypegenPage` type in your React component like so:

   ```ts
   ({ data }: PageProps<Queries.TypegenPage>)
   ```

   When you type out the site title like this you should get TypeScript IntelliSense:

   ```jsx
   <p>Site title: {data.site?.siteMetadata?.title}</p>
   ```

### Tips

- When adding a new key to your GraphQL query you'll need to save the file before new TypeScript types are generated. The autogenerated files are only updated on file saves.

## Configuring the VSCode GraphQL plugin

1. Install the [GraphQL extension](https://marketplace.visualstudio.com/items?itemName=GraphQL.vscode-graphql) in your VSCode.
1. Create a `graphql.config.js` at the root of your project with the following contents:

   ```js:title=graphql.config.js
   module.exports = require("./.cache/typegen/graphql.config.json")
   ```

   The VSCode extension will pick up the `graphql.config.js` file and use the autogenerated file from Gatsby's `.cache` directory.

1. Restart VSCode so that the GraphQL extension takes effect.
1. Start the development server with `gatsby develop`.
1. Go to any of your queries, e.g. a page query inside `src/pages` and use <kbd>Ctrl + Space</kbd> (or use <kbd>Shift + Space</kbd> as an alternate keyboard shortcut) to get autocompletion like in GraphiQL.

## Additional Resources

- [Gatsby with TypeScript](/docs/how-to/custom-configuration/typescript)
- [VSCode GraphQL Plugin](https://marketplace.visualstudio.com/items?itemName=GraphQL.vscode-graphql)
- [IntelliJ GraphQL Plugin](https://plugins.jetbrains.com/plugin/8097-graphql)
